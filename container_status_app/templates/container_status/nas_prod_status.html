<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
{#    <meta http-equiv="refresh" content="10">#}
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- BootStrap CSS -->
    <link rel="stylesheet" media="screen" href={{ url_for('static', filename='bootstrap.min.css') }}>
    <title>NAS Platform Status</title>
</head>
<body>
    <!-- Image and text -->
    <nav class="navbar navbar-dark bg-dark">
        <a class="navbar-brand" href="#">
            <img src="/static/usc_logo.jpg" width="30" class="d-inline-block align-top" alt="U.S. Cellular Logo">
            NAS Automation Status
        </a>
    </nav>
    <div class="jumbotron jumbotron-fluid">
        <div class="container">
            {% if cs.overall_status == "ACTIVE" %}
                <h1 class="display-4">{{cs.display_name}}<span class="badge badge-success">{{cs.overall_status}}</span></h1>
            {% else %}
                <h1 class="display-4">{{cs.display_name}}<span class="badge badge-danger">{{cs.overall_status}}</span></h1>
            {% endif %}

        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="card-deck">
{#                {% if cs.overall_status == "NOT ACTIVE" %}#}
                    <div class="card">
                        <h5 class="card-header bg-danger text-white">Not Available</h5>
                        <div class="card-body">
                            <ul class="list-group">
                                {% for application, app_status in cs.applications.items() %}
                                    {% if cs.overall_status == 'NOT ACTIVE' %}
                                        {%  set app_status  = 'NOT ACTIVE' %}
                                    {% endif %}
                                    {% if app_status == 'NOT ACTIVE' %}
                                        <li class="list-group-item">{{application}}</li>
                                    {% endif %}
                                {% endfor %}
                            </ul>
                            {% if cs.overall_status == 'NOT ACTIVE'  %}
                                <div class="alert alert-info" role="alert">
                                    <p class="lead">Expected to be restored by:</p>
                                    <p class="lead">{{cs.restored_by}}</p>
                                </div>
                            {% endif %}
                        </div>
                    </div>
{#                {% else %}#}
                    <div class="card">
                        <h5 class="card-header bg-success text-white">Available</h5>
                        <div class="card-body">
                            {% if cs.overall_status == 'ACTIVE' %}
                                <ul class="list-group">
                                    {% for application, app_status in cs.applications.items() %}
                                        {% if app_status == 'ACTIVE' %}
                                            <li class="list-group-item">{{application}}</li>
                                        {% endif %}
                                    {% endfor %}
                                </ul>
                            {% endif %}
                        </div>
                    </div>
{#                {% endif %}#}
                <div class="card">
                    <h5 class="card-header bg-secondary text-white">Contact Us</h5>
                    <div class="card-body">
                        <p>For questions, click the link to generate an email to the <a href="mailto:USCDLSA3AutomationEngineering@uscellular.com">SA3 Core Automation Engineering team.</a></p>
                    </div>
                </div>
                <div class="card">
                    <h5 class="card-header bg-secondary text-white">User Guides</h5>
                    <div class="card-body">
                        <ul class="list-group">
                            <a href="https://usc.intranet.teldta.com/sites/NNEO_NSAA/Deloitte/_layouts/15/start.aspx#/default.aspx" class="list-group-item list-group-item-action list-group-item-primary">
                                VLAN and AGG Router Health Check
                            </a>
                            <a href="https://usc.intranet.teldta.com/sites/NNEO_NSAA/EtherSAMDrop34/_layouts/15/start.aspx#/default.aspx" class="list-group-item list-group-item-action list-group-item-danger">
                                EtherSAM
                            </a>
                            <a href="https://usc.intranet.teldta.com/sites/NNEO_NSAA/SeGW/_layouts/15/start.aspx#/default.aspx" class="list-group-item list-group-item-action list-group-item-warning">
                                Security Gateway Health Check
                            </a>
                        <a href="https://usc.intranet.teldta.com/sites/NNEO_NSAA/PAM_Reset/_layouts/15/start.aspx#/default.aspx" class="list-group-item list-group-item-action list-group-item-success">
                                PAM Reset
                            </a>
                        <a href="https://usc.intranet.teldta.com/sites/NNEO_NSAA/EBAAuto/_layouts/15/start.aspx#/default.aspx" class="list-group-item list-group-item-action list-group-item-dark">
                                EBA
                            </a>
                        </ul>

                            <p class="card-text">
                                <small class="text-muted">If presented with the message "Sorry, this site hasn't been shared with you." after clicking a link please reach out to the project owner to have them add you.</small>
                            </p>

                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="card">
                    <h5 class="card-header bg-info">Notifications</h5>
                    <div class="card-body">
                        <form method="POST">
                            <div class="form-group">
                                <label for="emailFormControl">Enter an Email address to receive notifications related to the NAS Platform and its applications.</label>
                                <input type="email" class="form-control" id="emailFormControl" placeholder="name@example.com" name="email_addr" required>
                                <button type="submit" class="btn btn-primary mt-2">Submit</button>
                            </div>
                        </form>
                        {% if email_registered is defined %}
                            {% if email_registered is sameas True %}
                                <div class="alert alert-success" role="alert">Email Registered Successfully</div>
                            {% else %}
                                <div class="alert alert-danger" role="alert">Error Registering Email. Please contact SA3 Core Automation Team.</div>
                            {% endif %}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="card border-warning mt-3 ml-3 mr-3 mb-3">
        <div class="card-body">
            <h5 class="card-title">Known Issues</h5>
            <div class="accordion" id="knownIssuesaccordion">
                <div class="card">
                    <div class="card-header bg-warning" id="ethersamUIWorkaroundHeading">
                        <button class="btn btn-link btn-block text-dark text-left" type="button" data-toggle="collapse" data-target="#ethersamUI" aria-expanded="false" aria-controls="ethersamUI">
                            Ethersam UI long response time on test progress
                        </button>
                    </div>
                    <div id="ethersamUI" class="collapse hide" aria-labelledby="ethersamUIWorkaroundHeading" data-parent="#knownIssuesaccordion">
                        <div class="card-body">
                            <p>We have found a minor issue with the EtherSAM Nokia Single Site automation. While running the EtherSAM automation a user may experience what appears to be a long response time or lack of updates on the automation progress (while it appears automation has stalled, in fact the automation is continuing to run).</p>
                            To work around this issue:
                            <ul class="list-group">
                                <li class="list-group-item list-group-item-secondary">1)	Open a new browser session</li>
                                <li class="list-group-item list-group-item-secondary">2)	Type in your Site ID</li>
                                <li class="list-group-item list-group-item-secondary">3)	Select the log history</li>
                                <li class="list-group-item list-group-item-secondary">4)	Select start and end date</li>
                                <li class="list-group-item list-group-item-secondary">5)	Select show log</li>
                                <li class="list-group-item list-group-item-secondary">6)	Select “view test results” for the top entry in the list (if there is more than one test result available)</li>
                                <li class="list-group-item list-group-item-secondary">7)	Tail the active log by periodically doing a browser refresh</li>
                            </ul>
                            This will be fixed in the next release of the NAS Platform.
                        </div>
                    </div>
                </div>
{#                Remove below commented out code with next update#}
{#                <div class="card">#}
{#                    <div class="card-header bg-danger" id="ethersamstatus423Heading">#}
{#                        <button class="btn btn-link btn-block text-left text-white" type="button" data-toggle="collapse" data-target="#ethersam423" aria-expanded="false" aria-controls="ethersam423">#}
{#                            Ethersam Status 423 Error#}
{#                        </button>#}
{#                    </div>#}
{#                    <div id="ethersam423" class="collapse hide" aria-labelledby="ethersamstatus423Heading" data-parent="#knownIssuesaccordion">#}
{#                        <div class="card-body">#}
{#                            <p> While using the Ethersam application if you see a message like the following screenshot below currently the Ethersam application is locked up do to an issue. We are working to resolve this problem as soon as possible.</p>#}
{#                            <img src="/static/ethersam_status423.png" class="img-fluid" alt="Ethersam Status 423 image">#}
{#                        </div>#}
{#                    </div>#}
{#                </div>#}
            </div>
        </div>
    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="../../static/bootstrap.min.js"></script>
</body>
</html>