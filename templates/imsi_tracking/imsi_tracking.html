<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>U.S. Cellular Engineering</title>
</head>
<body>

    {% block content %}
        <h1>U.S. Cellular Imsi Tracking</h1>
        <p>Specify only the Imsi (e.g. 123456789) or with an identifier in () after the Imsi.</p>
        <ul>
            <strong>Example: 123456789(bob)</strong>
        </ul>
        <p>Can add multiple Imsis at a time by using a comma separated string:</p>
        <ul>
            With or without an identifier - <strong>123456789(andrew),987654321,147258369(bill)</strong>
        </ul>
        <p>Delete an Imsi(s) from the list by only specifying the Imsi without the identifier:</p>
        <ul>
            <p>Example: <strong>123456789</strong> or <strong>123456789,987654321</strong></p>
        </ul>

        <form method="POST">
            {{ form.csrf_token }}
            {{ form.imsis.label }}
            {{ form.imsis(size=100) }}
            {% with messages = get_flashed_messages() %}
            {% if messages %}
            <ul>
                {% for message in messages %}
                <p>
                    {% if message == "This field is required." %}
                        {{ message }}
                    {% endif%}
                </p>
                {% endfor %}
            </ul>
            {% endif %}
            {% endwith%}
            {{ form.add_delete_radio.label }} {{form.add_delete_radio }}
            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    <ul>
                        {% for message in messages %}
                        <p>
                            {% if message in "Not a valid choice" %}
                                {{ message }}
                            {% endif%}
                        </p>
                        {% endfor %}
                    </ul>
                {% endif %}
            {% endwith %}
            {{ form.submit() }}
        </form>
    {% endblock %}
    {% with messages = get_flashed_messages() %}
    {% if messages %}
    <ul>
        {% for message in messages %}
        <p>
            <h3>{{ message }}</h3>
        </p>
        {% endfor %}
    </ul>
    {% endif %}
    {% endwith %}

    <h2>List of Current Tracked Imsis</h2>
    <form method="GET">
        {{ form.imsi_filter.label }}
        {{ form.imsi_filter(size=100) }}
        <h5>To reset the list and clear the filter click "Submit" without a value.</h5>
        {{ form.submit() }}
        <p></p>
        {% if imsi_list %}
            {% for imsi in imsi_list.values() %}
            <li>{{ imsi }}</li>
            {% endfor %}
        {% endif %}
        {% if art %}
            {{ form.art(value=art) }}
        {% endif %}
    </form>


</body>
</html>